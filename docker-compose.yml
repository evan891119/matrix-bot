version: "3.9"
services:
  matrix-bot:
    build: .
    container_name: matrix-bot
    restart: unless-stopped
    environment:
      HOMESERVER_URL: "https://matrix.example.com"
      BOT_USER_ID: "@mybot:example.com"
      BOT_PASSWORD: "CHANGE_ME"
      STORE_PATH: "/data/store"
      DATA_PATH: "/data/db"
      ALLOWED_ROOMS: "!roomid1:example.com,!roomid2:example.com"
      ADMIN_USERS: "@admin:example.com"
      DEVICE_NAME: "matrix-bot"
      ALERT_ROOM_ID: "!alertroom:example.com"
      MONITOR_INTERVAL_SEC: "30"
      ALERT_COOLDOWN_MIN: "10"
      CPU_THRESHOLD: "85"
      CPU_CONSECUTIVE: "2"
      RAM_THRESHOLD: "90"
      DISK_THRESHOLD: "90"
      LOADAVG_THRESHOLD: "2.0"
      LOADAVG_AUTO_PER_CORE: "true"
      ALLOW_TODO_PUBLIC: "false"
      TIMEZONE: "Asia/Taipei"
    volumes:
      - ./data:/data
